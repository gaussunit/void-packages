# Template file for 'baresip'
pkgname=baresip
version=0.5.7
revision=1
build_style=gnu-makefile
hostmakedepends="pkg-config"
makedepends="libgsm-devel libpng-devel libressl-devel libsndfile-devel
 opus-devel re-devel rem-devel spandsp-devel speex-devel speexdsp-devel
 tiff-devel twolame-devel
 $(vopt_if video 'SDL2-devel ffmpeg-devel libvpx-devel libX11-devel
 v4l-utils-devel x265-devel')
 $(vopt_if gtk 'cairo-devel gst-plugins-base1-devel gstreamer1-devel
 gtk+-devel mpg123-devel')"
short_desc="Modular SIP User-Agent with audio and video support"
maintainer="JohnZ <johnz@posteo.net>"
license="BSD"
homepage="http://www.creytiv.com/baresip"
distfiles="http://www.creytiv.com/pub/baresip-${version}.tar.gz"
checksum=e66c16c7cf13bb3f43113f04e4d19edea3e49fb010d067238d5dc4a1aa1b8b7d
make_use_env=1

# Enable/disable modules
make_install_args="EXTRA_MODULES=$(vopt_if video snapshot)"
make_build_args="PREFIX=/usr EXTRA_MODULES=$(vopt_if video snapshot)
 USE_ALSA= USE_GST= USE_GST_VIDEO= USE_OSS= USE_SDL= USE_ZRTP=
 $(vopt_if video '' 'USE_AVCODEC= USE_AVFORMAT= USE_CAIRO= USE_SDL2= USE_V4L=
 USE_V4L2= USE_VIDEO= USE_VPX= USE_X11=')
 $(vopt_if gtk '' 'USE_CAIRO= USE_GST1= USE_GST_VIDEO1= USE_GTK=')"

# Package build options
build_options="gtk video"
build_options_default="video"
desc_option_gtk="Enable support for GTK+2 frontend and related modules"
desc_option_video="Enable support for video calling"

post_install() {
	vlicense docs/COPYING
}
