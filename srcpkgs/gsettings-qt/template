# Template file for 'gsettings-qt'
pkgname=gsettings-qt
version=0.1.20160329
revision=1
create_wrksrc=yes
build_style=qmake
hostmakedepends="qt5-qmake pkg-config qt5-declarative"
makedepends="qt5-devel qt5-declarative-devel glib-devel"
short_desc="Qml bindings for GSettings"
maintainer="John <johnz@posteo.net>"
license="GPL-3"
homepage="https://launchpad.net/gsettings-qt"
distfiles="http://packages.linuxdeepin.com/ubuntu/pool/main/g/gsettings-qt/gsettings-qt_0.1%2b16.04.20160329.orig.tar.gz"
checksum=3e7de0388d2c57ae6d5e46d08a99deab2f30bba2928766401d460edaf60d3e5f
nocross="ERROR: ld.so: object '../src/libgsettings-qt.so.1' from LD_PRELOAD cannot be preloaded (wrong ELF class: ELFCLASS32): ignored."

if [ "$CROSS_BUILD" ]; then
	hostmakedepends+=" qt5-devel qt5-declarative-devel"
fi

post_install() {
	rm -r ${DESTDIR}/usr/tests
}

gsettings-qt-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/lib/*.so
	}
}
